### 基于Python实现的通信系统仿真

#### 一、设计思想

1、**设计初衷**

​	 本系统基于本人专业方向的理论知识搭建，本人为通信专业方向的学生，在本学期学习了《通信原理》等数据传输与处理等相关课程，介绍了许多通信模型，但是缺乏实践验证，想结合专业所学，利用本课程所学的Python知识搭建一个通信模型，用于模拟生活中数据通信的实际过程。

2、**实验原理** 

​	该通信系统的搭建涉及通信的一些专业知识，为使使用者了解相关流程，下面简单科普一些用到的专有名词：

​	**PCM通信系统** 

​	本程序以PCM通信系统为基本框架。

​	在我们日常生活中，信号并不是以模拟的形式直接端到端传输，需要经过采样后，得到离散的数组，再将幅度量化用0-1的比特串编码。但数字的信号并不适合在大气、电缆中传输，因为自然界的参量都是连续变化的，所以需要将信号加载在某个可以连续变化的量上，称为调制。而在解调时，则在这些连续变化的量上设定界限，若该连续量在某个范围内则判定为某个被量化的离散的数字量，再根据编码时所设定的规则还原成原来的幅度，构成了离散的数组，计算机会将这些信号转化成我们可识别的形式，就这样还原了原来的信号。

![演示文稿1](.\img\演示文稿1.jpg)

​	以上则为PCM通信系统，亦即本程序的系统框图。下面具体探讨量化编码和调制解调的方法。

​	**量化编码**

​	在量化的时候我们可以把信号幅度先量化特定的电平，可以是某个整数，再用二进制表示，这称为均匀量化。但是对于小信号不友好，我们需要提高对小信号的精度。采用了A律量化，映射关系如下图

![img](https://bkimg.cdn.bcebos.com/pic/7dd98d1001e93901ee2f12bb78ec54e736d19602?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U3Mg==,g_7,xp_5,yp_5/format,f_auto)

​	**调制**

​	在数字信号的调制方式中QPSK是最常用的一种卫星数字信号调制方式,它具有较高的频谱利用率、较强的抗干扰性、在电路上实现也较为简单。

​	QPSK信号的正弦载波有4个可能的离散相位状态，每个载波相位携带2个二进制符号，其信号表示式为，其信号表示式为：

$s_{QPSK}(t) = \sum_ng(t-nT_s)cos(\omega_0t+\phi_n)$

$=\sum_ng(t-nT_s)cos(\omega_0t)cos\phi_n-\sum_ng(t-nT_s)sin(\omega_0t)sin\phi_n$

$=I(t)cos\omega_0t-Q(t)sin\omega_0t$

​	其中$T_s$为四进制符号间隔,$\phi_n$为载波的相位，有四种可能的状态$45^。、135^。、225^。、315^。$。 在实际调制过程中$s_i(t)$可以分为正交的$I$路和$Q$路信号。在调试时一次性取出2个比特，映射到下图中的某个坐标点，生成一个复数，幅度为1。如当比特串为11时，$I$路幅度为$\frac{\sqrt{2}}{2}$，$Q$路幅度也为$\frac{\sqrt{2}}{2}$，调制成$\frac{\sqrt{2}}{2}+ i\frac{\sqrt{2}}{2}$的信号。这只是信号的数学表示，在实际中则表现为相位的变化。

![img](https://bkimg.cdn.bcebos.com/pic/cdbf6c81800a19d883e3dc7533fa828ba71e46d9?x-bce-process=image/resize,m_lfit,w_268,limit_1/format,f_auto)



​	解调过程则是调制的逆过程，对接受的信号进行判决，看信号落在上图哪一点，离四点最近的哪一个就判为对应点，解码为0-1信号。由于接收到的信号加载在了载波上，需要进行积分判断相关性。

#### 二、功能介绍

​	本程序为基于PCM通信系统的仿真模型，可以模拟数据在传输信道时的过程，如量化、编码、调制、解调、解码等一系列过程。

​	本程序可以设置要传输的数据格式，一种是一段正弦信号，用一组数组表示，其中各个元素表示该时间点上的幅度，为简单演示，只展示了一段周期，在传输完后会在屏幕上显示。另一种是一张50X50的RGB图片，也可以经过该系统进行传输，在传输过程中转成了串行的数据，在恢复信号时会重新恢复成原来大小的矩阵，并利用相关工具在屏幕上显示。此外，我还尝试了读取wav文件来传输音乐信号，但是由于我们日常听的音乐采样率一般为44100Hz，即一秒钟有4万多个数据，数据量过于庞大，耗时较长。

​	本程序可以设置传输参数。一是信号的采样率，在电脑中存储的数组并没有时序信息，只有先后关系，而确定采样率就相当于确定信号各相邻元素之间的时间间隔。二是载波的频率，在物理空间信号不能单独存在，需要加载在载波上，我们的信息就蕴含在载波的相位上。三是模拟点数，在计算机中模拟的波形也是离散的，这里的点数代表用于表示载波一个周期所用的点数。

​	本程序可以评估系统性能。在仿真完后，程序会计算传输完的比特串与传输前的比特串的差别，并计算误比特率，在界面上显示。

#### 三、使用方法

​	为了使交互更加人性化，本程序设置了tkinter界面，如下所示

![gui](.\img\gui.png)

1、在信号选项下拉框中选择要传输的数据类型，一是一段正弦信号，用'sin'表示，二是一张图片，用'img'表示；

2、设置传输参数，在GUI中输入'采样频率'、'载波频率'、'模拟点数'、'噪声幅度'参数大小，在本程序中已设置了默认参数。

3、点击'Run'按键，开始仿真，并显示波形或图像，显示误比特率

4、设置不同参数，重新仿真，得到新的波形或图像，新的误比特率

5、点击'Quit'按键，退出。

#### 四、仿真结果

##### 1、实验基本功能演示

参数设置

| 采样频率 | 100  |
| -------- | ---- |
| 载波频率 | 500  |
| 模拟点数 | 10   |
| 噪声幅度 | 0.3  |

原始波形

<img src=".\img\原始正弦波形.png" alt="原始正弦波形" style="zoom:50%;" />

传输后波形

<img src=".\img\正弦波形.png" alt="正弦波形" style="zoom:50%;" />

原始图片

<img src=".\img\lena50.jpg" alt="lena50" style="zoom:200%;" />

传输后图片

<img src=".\img\传输后图片.png" alt="传输后图片" style="zoom: 33%;" />

##### 2、增大噪声幅度至4

传输后波形

<img src=".\img\noise_sin.png" alt="noise_sin" style="zoom:50%;" />

误比特率：0.0625006168333

传输后图片

![noise_fig](.\img\noise_fig.png)

误比特率：0.06168333333333
